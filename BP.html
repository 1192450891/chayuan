<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>茶耘</title>
    <link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css"
          >
    <link rel="stylesheet" href="assets/css/style.css">
    <style>
        .d {
            border: 2px solid #ff0000;
        }
    </style>
</head>
<body class="bg-main" onload="initData();">
<script src="https://cdn.staticfile.org/jquery/2.1.1/jquery.min.js"></script>
<script src="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script type="text/javascript" src="assets/plugins/echarts.js"></script>

<div class="container-fluid">
    <!-- 顶部 -->
    <div class="header bg-header row">
        <!-- logo -->
        <div class="header-logo col-md-4 row">
            <img src="assets/gizmos/icon.png" class="img-rounded logo-top col-md-3">
            <a href="index.html">
                <p class="font-title col-md-9 col-sm-12" href="index.html">浙江果茶分析平台</p>
            </a>
        </div>
        <!-- 导航栏 -->
        <div class="col-md-8">
            <nav class="navbar-top" style="margin-right: -30px">
                <div class="navbar-collapse">
                    <ul class="nav navbar-nav navbar-right">
                        <li class="menu-item font-item pointer">
                            作物产量
                            <div class="sub-menu" style="left:-16px">
                                <ul class="MenuItems">
                                    <li class="MenuItems-item">
                                        <a href="crop_tea.html">茶叶</a>
                                    </li>
                                    <li class="MenuItems-item">
                                        <a href="crop_fruit.html">水果</a>
                                    </li>
                                </ul>
                            </div>
                        </li>
                        <li class="menu-item font-item pointer">
                            作物面积
                            <div class="sub-menu">
                                <ul class="MenuItems">
                                    <li class="MenuItems-item">
                                        <a href="area_tea.html">茶叶</a>
                                    </li>
                                    <li class="MenuItems-item">
                                        <a href="area_fruit.html">水果</a>
                                    </li>
                                </ul>
                            </div>
                        </li>
                        <li class="menu-item font-item pointer" id="moni">
                            天气指标
                        </li>
                        <li class="menu-item font-item pointer" id="BP">
                            产量预测
                        </li>
                    </ul>
                </div>
            </nav>
        </div>
    </div>
    <!-- 图表 -->
    <div class="col-md-12 bottom" style="margin-top: 5px">
        <!-- 左竖列 -->
        <div class="col-md-4 v-box">
            <div class="col-md-12 bottom-frame" style="margin-top: 5px">
                <div id="chart_crop_pie" style="width:100%;height:42vh;"></div>
            </div>
        </div>
        <!-- 中间地图 -->
        <div class="col-md-4 ">
            <div class="btn-group" style="margin: auto">
                <button class="button btn-default font-button" type="button" id="btnTea" onclick="OnButtonTea()">茶叶
                </button>
                <button class="button btn-default font-button" type="button" id="btnOrange" onclick="OnButtonOra()">柑橘
                </button>
                <button class="button btn-default font-button" type="button" id="btnTeaerror" onclick="OnButtonTeaerror()">茶叶误差
                </button>
                <button class="button btn-default font-button" type="button" id="btnOrangeerror" onclick="OnButtonOraerror()">柑橘误差
                </button>
            </div>
            <div class="bg-map">
                <div id="EchartMap" style="height: 400px;
          borderRadius: 5px;
	      padding: 0px;
	      margin: 0px;
	      border-width: 0px;" ref="myEchart"></div>
            </div>
            <div class="col-md-12 bottom-frame bottom-index">

                <div class="row">
                    <div class="font-index col-md-12 col-sm-12" id="error" style="margin: 10px;">
                        训练集一，隐含层节点数：15,5<br/>茶叶平均误差：<br/>2014年:15.93% <br/>2015年:18.21%<br/>2016年:5.06%<br/>2017年:4.10%<br/>2018年:15.85%
                    </div>
                </div>
            </div>
        </div>
        <!-- 右边 -->
        <div class="col-md-4 v-box">
            <div class="col-md-12 bottom-frame"  >
                <div class="font-title" style="margin-top: 5px"> 设置：<br/></div>
                <br/>
                <!--右侧菜单-->
                <div class="downorder">
                    <button class="order">
                        训练集选择
                    </button>
                    <div class="downtext" >
                        <button class="button btn-default font-button" type="button" id="btnfirst" onclick="OnButtonfirst()">训练集一：2009-2018年数据</button>
                        <button class="button btn-default font-button" type="button" id="btnsecond" onclick="OnButtonsecond()">训练集二：2012-2018年数据</button>
                        <button class="button btn-default font-button" type="button" id="btnthird" onclick="OnButtonthird()">训练集三：2014-2018年数据</button>
                    </div>
                </div>
                <br/>
                <!--右侧菜单-->
                <div class="downorder">
                    <button class="order">
                        隐含层节点设置
                    </button>
                    <div class="downtext">
                        <button class="button btn-default font-button" type="button" id="btnone" onclick="OnButtonone()">15,5</button>
                        <button class="button btn-default font-button" type="button" id="btntwo" onclick="OnButtontwo()">12,8</button>
                    </div>
                </div>
                <br/>
                <br/>&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;
                <button class="btn-default" style="color: #fff"  type="button" id="btnok" onclick="OnButtonok()">确定
                </button>
                <br/>&emsp;&emsp;&emsp;
            </div>
    </div>
</div>
</div>
<script type="text/javascript">
    $('#moni').on('click', function () {
        self.location = 'monitor.html';
    })
    $('#BP').on('click', function () {
        self.location = 'BP.html';
    })
</script>
<script type="text/javascript">

    var mapdata = {
        "tea": {
            "year_2018": [{}],
            "year_2017": [{}],
            "year_2016": [{}],
            "year_2015": [{}],
            "year_2014": [{}]
        },
        "orange": {
            "year_2018": [{}],
            "year_2017": [{}],
            "year_2016": [{}],
            "year_2015": [{}],
            "year_2014": [{}]
        },
    }
    //数据切换
    var mode = 0;
    var modename = "茶叶";
    var name = "西湖区";
    //右侧菜单按钮显示切换
    var mode_right_top=0;
    var mode_right_low=0;

    var mapdatamode=0;
    var mapmode=100;/*茶叶模式对应100；柑橘对应200*/
    var mapdatalistmode=1;/*训练集一对应1；二对应2；三对应3*/
    var mapdatapointmode=10;/*隐含层15,5对应10；12,8对应20*/
//链接左边饼图和中间地图
    var myChart_pie = echarts.init(document.getElementById('chart_crop_pie'));
    var myChart_map = echarts.init(document.getElementById("EchartMap"));
    echarts.connect([myChart_map, myChart_pie]);
//右侧下拉菜单
//     var myselect=document.getElementById("test");
//     var index=myselect.selectedIndex
    //图表初始化
    SetClass(mode);
    SetClass_right_top(mode_right_top);
    SetClass_right_low(mode_right_low);
    SetDistrictDara(name);

    myChart_map.on("click", function (result) {
        var params = result.name + "";
        if (params.indexOf("2") === -1) {
            name = params;
            SetDistrictDara(name);
        }
    })
//填入地图数据
    function initData() {
        if(mode==0)
        {
            $.get("./json/crop_teaBP_2009-2018a.json", function (result) {
                var len = result.length;
                for (var i = 0; i < len - 1; i++) {
                    for (var year = 2014; year < 2019; year++) {
                        if (result[i]['district'] !== result[i]['urban']) {
                            mapdata.tea['year_' + year].pop({});
                        }
                    }
                }
            });
        }
        else
        {
            $.get("./json/crop_orangeBP_2009-2018a.json", function (result) {
                var len = result.length;
                for (var i = 0; i < len - 1; i++) {
                    for (var year = 2014; year < 2019; year++) {
                        if (result[i]['district'] !== result[i]['urban']) {
                            mapdata.orange['year_' + year].pop({});
                        }
                    }
                }
            });
        }

        switch (mapdatamode) {
            case 0:
                $.get("./json/crop_teaBP_2009-2018a.json", function (result) {
                    var len = result.length;
                    for (var i = 0; i < len - 1; i++) {
                        for (var year = 2014; year < 2019; year++) {
                            if (result[i]['district'] !== result[i]['urban']) {
                                mapdata.tea['year_' + year].push({
                                    name: result[i]['district'],
                                    value: result[i]['year_' + year]
                                });
                            }
                        }
                    }
                    initMap();
                });
                break;
            case 1:
                $.get("./json/crop_teaBP_2012-2018a.json", function (result) {
                    var len = result.length;
                    for (var i = 0; i < len - 1; i++) {
                        for (var year = 2014; year < 2019; year++) {
                            if (result[i]['district'] !== result[i]['urban']) {
                                mapdata.tea['year_' + year].push({
                                    name: result[i]['district'],
                                    value: result[i]['year_' + year]
                                });
                            }
                        }
                    }
                    initMap();
                });
                break;
            case 2:
                $.get("./json/crop_teaBP_2014-2018a.json", function (result) {
                    var len = result.length;
                    for (var i = 0; i < len - 1; i++) {
                        for (var year = 2014; year < 2019; year++) {
                            if (result[i]['district'] !== result[i]['urban']) {
                                mapdata.tea['year_' + year].push({
                                    name: result[i]['district'],
                                    value: result[i]['year_' + year]
                                });
                            }
                        }
                    }
                    initMap();
                });
                break;
            case 3:
                $.get("./json/crop_teaBP_2009-2018b.json", function (result) {
                    var len = result.length;
                    for (var i = 0; i < len - 1; i++) {
                        for (var year = 2014; year < 2019; year++) {
                            if (result[i]['district'] !== result[i]['urban']) {
                                mapdata.tea['year_' + year].push({
                                    name: result[i]['district'],
                                    value: result[i]['year_' + year]
                                });
                            }
                        }
                    }
                    initMap();
                });
                break;
            case 4:
                $.get("./json/crop_teaBP_2012-2018b.json", function (result) {
                    var len = result.length;
                    for (var i = 0; i < len - 1; i++) {
                        for (var year = 2014; year < 2019; year++) {
                            if (result[i]['district'] !== result[i]['urban']) {
                                mapdata.tea['year_' + year].push({
                                    name: result[i]['district'],
                                    value: result[i]['year_' + year]
                                });
                            }
                        }
                    }
                    initMap();
                });
                break;
            case 5:
                $.get("./json/crop_teaBP_2014-2018b.json", function (result) {
                    var len = result.length;
                    for (var i = 0; i < len - 1; i++) {
                        for (var year = 2014; year < 2019; year++) {
                            if (result[i]['district'] !== result[i]['urban']) {
                                mapdata.tea['year_' + year].push({
                                    name: result[i]['district'],
                                    value: result[i]['year_' + year]
                                });
                            }
                        }
                    }
                    initMap();
                });
                break;
            case 6:
                $.get("./json/crop_orangeBP_2009-2018a.json", function (result) {
                    var len = result.length;
                    for (var i = 0; i < len - 1; i++) {
                        for (var year = 2014; year < 2019; year++) {
                            if (result[i]['district'] !== result[i]['urban']) {
                                mapdata.orange['year_' + year].push({
                                    name: result[i]['district'],
                                    value: result[i]['year_' + year]
                                });
                            }
                        }
                    }
                    initMap();
                });
                break;
            case 7:
                $.get("./json/crop_orangeBP_2012-2018a.json", function (result) {
                    var len = result.length;
                    for (var i = 0; i < len - 1; i++) {
                        for (var year = 2014; year < 2019; year++) {
                            if (result[i]['district'] !== result[i]['urban']) {
                                mapdata.orange['year_' + year].push({
                                    name: result[i]['district'],
                                    value: result[i]['year_' + year]
                                });
                            }
                        }
                    }
                    initMap();
                });
                break;
            case 8:
                $.get("./json/crop_orangeBP_2014-2018a.json", function (result) {
                    var len = result.length;
                    for (var i = 0; i < len - 1; i++) {
                        for (var year = 2014; year < 2019; year++) {
                            if (result[i]['district'] !== result[i]['urban']) {
                                mapdata.orange['year_' + year].push({
                                    name: result[i]['district'],
                                    value: result[i]['year_' + year]
                                });
                            }
                        }
                    }
                    initMap();
                });
                break;
            case 9:
                $.get("./json/crop_orangeBP_2009-2018b.json", function (result) {
                    var len = result.length;
                    for (var i = 0; i < len - 1; i++) {
                        for (var year = 2014; year < 2019; year++) {
                            if (result[i]['district'] !== result[i]['urban']) {
                                mapdata.orange['year_' + year].push({
                                    name: result[i]['district'],
                                    value: result[i]['year_' + year]
                                });
                            }
                        }
                    }
                    initMap();
                });
                break;
            case 10:
                $.get("./json/crop_orangeBP_2012-2018b.json", function (result) {
                    var len = result.length;
                    for (var i = 0; i < len - 1; i++) {
                        for (var year = 2014; year < 2019; year++) {
                            if (result[i]['district'] !== result[i]['urban']) {
                                mapdata.orange['year_' + year].push({
                                    name: result[i]['district'],
                                    value: result[i]['year_' + year]
                                });
                            }
                        }
                    }
                    initMap();
                });
                break;
            case 11:
                $.get("./json/crop_orangeBP_2014-2018b.json", function (result) {
                    var len = result.length;
                    for (var i = 0; i < len - 1; i++) {
                        for (var year = 2014; year < 2019; year++) {
                            if (result[i]['district'] !== result[i]['urban']) {
                                mapdata.orange['year_' + year].push({
                                    name: result[i]['district'],
                                    value: result[i]['year_' + year]
                                });
                            }
                        }
                    }
                    initMap();
                });
                break;

        }

    }
//搭建地图框架
    function initMap() {
        $.get("./json/zj.json", function (result) {
            echarts.registerMap("zj", result);
            var option;
            option = {
                baseOption: {
                    timeline: {
                        axisType: 'category',
                        autoPlay: true,
                        playInterval: 1000,
                        data: ['2014', '2015', '2016', '2017', '2018']
                    },
                    title: {
                        show: true,
                        text: '浙江省地图信息',
                        left: 'center',
                        textStyle: {
                            color: 'rgba(255, 255, 255, 255)'
                        }
                    },
                    tooltip: {
                        trigger: 'item',
                    },
                    toolbox: {
                        feature: {
                            saveAsImage: {
                                title: '保存',
                                icon: 'image://assets/gizmos/download.png',
                                backgroundColor:'rgba(0,0,0,0)',
                                emphasis:{
                                    iconStyle: {
                                        textFill:'#fff'}
                                }
                            }
                        },
                    },
                    visualMap: {
                        text: ['High', 'Low'],
                        realtime: false,
                        calculable: true,
                        inRange: {
                            color: ['#00f500', '#5ef700', '#94f700', '#c6f600', '#f5f500', '#fcc200', '#fc8b00', '#fb5700', '#f40000']
                        },
                        textStyle: {
                            color: '#fff'
                        }
                    },
                    series: [{
                        name: '数量',
                        type: 'map',
                        mapType: "zj",
                        selectedMode: 'single',
                        aspectScale: 1,
                        nameProperty: 'district',
                        itemStyle: {
                            normal: {
                                label: {
                                    show: true
                                },
                                borderWidth: 1, //省份的边框宽度
                                borderColor: '#7E4A32', //省份的边框颜色
                                color: '#6fec6b', //地图背景颜色
                                areaColor: "#DCCFF8",
                                areaStyle: {
                                    color: '#f60'
                                } //设置地图颜色
                            },
                            emphasis: {
                                label: {
                                    show: true
                                }
                            }
                        },
                        roam: true,
                        zoom: 1.2,
                        label: {
                            normal: {
                                show: true,
                            },
                            emphasis: {
                                show: true
                            }
                        }
                    },
                    ]
                }
            };
            myChart_map.setOption(option);
            switch (mode) {
                case 0:
                    option = {
                        baseOption: {
                            visualMap: {
                                min: 0,
                                max: 10000,
                            }
                        },
                        options: [
                            {
                                title: {text: '2014年城镇' + modename + '产量变化预测'},
                                series: [
                                    {data: mapdata.tea.year_2014}
                                ]
                            },
                            {
                                title: {text: '2015年城镇' + modename + '产量变化预测'},
                                series: [
                                    {data: mapdata.tea.year_2015}
                                ]
                            },
                            {
                                title: {text: '2016年城镇' + modename + '产量变化预测'},
                                series: [
                                    {data: mapdata.tea.year_2016}
                                ]
                            },
                            {
                                title: {text: '2017年城镇' + modename + '产量变化预测'},
                                series: [
                                    {data: mapdata.tea.year_2017}
                                ]
                            },
                            {
                                title: {text: '2018年城镇' + modename + '产量变化预测'},
                                series: [
                                    {data: mapdata.tea.year_2018}
                                ]
                            }
                        ]
                    };
                    break;
                case 1:
                    option = {
                        baseOption: {
                            visualMap: {
                                min: 0,
                                max: 50000,
                            }
                        },
                        options: [
                            {
                                title: {text: '2014年城镇' + modename + '产量变化预测'},
                                series: [
                                    {data: mapdata.orange.year_2014}
                                ]
                            },
                            {
                                title: {text: '2015年城镇' + modename + '产量变化预测'},
                                series: [
                                    {data: mapdata.orange.year_2015}
                                ]
                            },
                            {
                                title: {text: '2016年城镇' + modename + '产量变化预测'},
                                series: [
                                    {data: mapdata.orange.year_2016}
                                ]
                            },
                            {
                                title: {text: '2017年城镇' + modename + '产量变化预测'},
                                series: [
                                    {data: mapdata.orange.year_2017}
                                ]
                            },
                            {
                                title: {text: '2018年城镇' + modename + '产量变化预测'},
                                series: [
                                    {data: mapdata.orange.year_2018}
                                ]
                            }
                        ]
                    };
                    break;
            }
            myChart_map.setOption(option);
            // })
        })
    }

    function RemoveClass() {
        var btn;

                btn = document.getElementById("btnTea");
                btn.classList.remove("button-active");

                btn = document.getElementById("btnOrange");
                btn.classList.remove("button-active");

                btn = document.getElementById("btnTeaerror");
                btn.classList.remove("button-active");

                btn = document.getElementById("btnOrangeerror");
                btn.classList.remove("button-active");

    }

    function SetClass(mode) {
        var btn;
        switch (mode) {
            case 0:
                btn = document.getElementById("btnTea");
                if (btn.className.indexOf("button-active") === -1) {
                    btn.className += " button-active";
                }
                break;
            case 1:
                btn = document.getElementById("btnOrange");
                if (btn.className.indexOf("button-active") === -1) {
                    btn.className += " button-active";
                }
                break;
            case 2:
                btn = document.getElementById("btnTeaerror");
                if (btn.className.indexOf("button-active") === -1) {
                    btn.className += " button-active";
                }
                break;
            case 3:
                btn = document.getElementById("btnOrangeerror");
                if (btn.className.indexOf("button-active") === -1) {
                    btn.className += " button-active";
                }
                break;
        }
    }
    function RemoveClass_right_top() {
        var btn;

        btn = document.getElementById("btnfirst");
        btn.classList.remove("button-active");

        btn = document.getElementById("btnsecond");
        btn.classList.remove("button-active");

        btn = document.getElementById("btnthird");
        btn.classList.remove("button-active");


    }
    function RemoveClass_right_low() {
        var btn;

        btn = document.getElementById("btnone");
        btn.classList.remove("button-active");

        btn = document.getElementById("btntwo");
        btn.classList.remove("button-active");

    }
    function SetClass_right_top(mode_right_top) {
        var btn;
        switch (mode_right_top) {
            case 0:
                btn = document.getElementById("btnfirst");
                if (btn.className.indexOf("button-active") === -1) {
                    btn.className += " button-active";
                }
                break;
            case 1:
                btn = document.getElementById("btnsecond");
                if (btn.className.indexOf("button-active") === -1) {
                    btn.className += " button-active";
                }
                break;
            case 2:
                btn = document.getElementById("btnthird");
                if (btn.className.indexOf("button-active") === -1) {
                    btn.className += " button-active";
                }
                break;
        }
    }
    function SetClass_right_low(mode_right_low) {
        var btn;
        switch (mode_right_low) {
            case 0:
                btn = document.getElementById("btnone");
                if (btn.className.indexOf("button-active") === -1) {
                    btn.className += " button-active";
                }
                break;
            case 1:
                btn = document.getElementById("btntwo");
                if (btn.className.indexOf("button-active") === -1) {
                    btn.className += " button-active";
                }
                break;
        }
    }
    //按钮数据更新
    {
        //中部按钮
        function OnButtonTea() {
            RemoveClass();
            mode = 0;
            modename = "茶叶";
            mapmode=100;
            SetDistrictDara(name);
            SetClass(mode);
            initMap();
            OnButtonok();
             }
        function OnButtonOra() {
            RemoveClass();
            mode = 1;
            modename = "柑橘";
            mapmode=200;
            SetDistrictDara(name);
            SetClass(mode);
            initMap();
            OnButtonok();
            }
        function OnButtonTeaerror() {
                RemoveClass();
                mode = 0;
                modename = "茶叶误差";
                mapmode=100;
                SetDistrictDara(name);
                SetClass(mode+2);
                initMap();
                OnButtonok();
            }
        function OnButtonOraerror() {
                RemoveClass();
                mode = 1;
                modename = "柑橘误差";
               mapmode=200;
                SetDistrictDara(name);
                SetClass(mode+2);
                initMap();
                OnButtonok();
            }
        // 右侧按钮
        function OnButtonok() {
            switch (mapmode+mapdatalistmode+mapdatapointmode) {
                case 111:mapdatamode=0;break;//茶叶 十位代表节点模式 个位代表训练集选择
                case 112:mapdatamode=1;break;
                case 113:mapdatamode=2;break;
                case 121:mapdatamode=3;break;
                case 122:mapdatamode=4;break;
                case 123:mapdatamode=5;break;
                case 211:mapdatamode=6;break;//柑橘
                case 212:mapdatamode=7;break;
                case 213:mapdatamode=8;break;
                case 221:mapdatamode=9;break;
                case 222:mapdatamode=10;break;
                case 223:mapdatamode=11;break;
            }
            SetDiv();
            initData();
        }
            function OnButtonfirst(){
                RemoveClass_right_top();
                mapdatalistmode=1;
                mode_right_top=0;
                SetClass_right_top(mode_right_top);
            }
        function OnButtonsecond(){
            RemoveClass_right_top();
            mapdatalistmode=2;
            mode_right_top=1;
            SetClass_right_top(mode_right_top);
        }
        function OnButtonthird(){
            RemoveClass_right_top();
            mapdatalistmode=3;
            mode_right_top=2;
            SetClass_right_top(mode_right_top);
        }
        function OnButtonone(){
            RemoveClass_right_low();
            mapdatapointmode=10;
            mode_right_low=0;
            SetClass_right_low(mode_right_low);
        }
        function OnButtontwo(){
            RemoveClass_right_low();
            mapdatapointmode=20;
            mode_right_low=1;
            SetClass_right_low(mode_right_low);
        }
        }

//左上饼图 区数据
    function SetDistrictDara(name) {
        var teaDisData = {
            "year_2018": [],
            "year_2017": [],
            "year_2016": [],
            "year_2015": [],
            "year_2014": []
        }
        var urban = '';


        myChart_pie.setOption({
            baseOption: {
                timeline: {
                    axisType: 'category',
                    autoPlay: true,
                    playInterval: 1000,
                    data: [ '2014', '2015', '2016', '2017', '2018']
                },
                title: {
                    textStyle: {
                        color: 'rgba(255, 255, 255, 255)'
                    },
                    left: 'center'
                },
                toolbox: {
                    feature: {
                        saveAsImage: {
                            title: '保存',
                            icon: 'image://assets/gizmos/download.png',
                            connectedBackgroundColor:'rgba(0,0,0,0)',
                            backgroundColor:'rgba(0,0,0,0)',
                            emphasis:{
                                iconStyle: {
                                    textFill:'#fff'}
                            }
                        }
                    },
                },
                series: [{
                    type: 'pie',
                    radius: '50%',
                    data: [],
                    label:{
                        fontSize:13,
                        color:'#fff',
                    }
                }],
            }
        });
        switch (mode) {
            case 0:
                $.get("./json/crop_teaBP_2014-2018a.json").done(function (result) {
                    var len = result.length;

                    //左上 市产量饼图
                    for (i = 0; i < len; i++) {
                        if (result[i]['district'] === name) {
                            urban = result[i]['urban'];
                            break;
                        }
                    }
                    for (i = 0; i < len; i++) {
                        if (result[i]['urban'] === urban && result[i]['urban'] !== result[i]['district']) {
                            for (var year = 2014; year < 2019; year++) {
                                teaDisData['year_' + year].push({
                                    value: result[i]['year_' + year],
                                    name: result[i]['district']
                                })
                            }
                        }
                    }
                    myChart_pie.setOption({
                        baseOption: {
                            title: {
                                text: urban + '各地区' + modename + '产量占比预测',
                            },
                            series: [{
                                name: modename + '产量',
                            }],
                        },
                        options: [
                            {
                                title: {text: '2014年' + urban + modename + '产量占比预测'},
                                series: [
                                    {data: teaDisData.year_2014}
                                ]
                            },
                            {
                                title: {text: '2015年' + urban + modename + '产量占比预测'},
                                series: [
                                    {data: teaDisData.year_2015}
                                ]
                            },
                            {
                                title: {text: '2016年' + urban + modename + '产量占比预测'},
                                series: [
                                    {data: teaDisData.year_2016}
                                ]
                            },
                            {
                                title: {text: '2017年' + urban + modename + '产量占比预测'},
                                series: [
                                    {data: teaDisData.year_2017}
                                ]
                            },
                            {
                                title: {text: '2018年' + urban + modename + '产量占比预测'},
                                series: [
                                    {data: teaDisData.year_2018}
                                ]
                            }
                        ]
                    });
                });
                break;
            case 1:
                $.get("./json/crop_orangeBP_2014-2018a.json").done(function (result) {
                    var len = result.length;

                    //左上 市产量饼图
                    for (i = 0; i < len; i++) {
                        if (result[i]['district'] === name) {
                            urban = result[i]['urban'];
                            break;
                        }
                    }
                    for (i = 0; i < len; i++) {
                        if (result[i]['urban'] === urban && result[i]['urban'] !== result[i]['district']) {
                            for (var year = 2014; year < 2019; year++) {
                                teaDisData['year_' + year].push({
                                    value: result[i]['year_' + year],
                                    name: result[i]['district']
                                })
                            }
                        }
                    }
                    myChart_pie.setOption({
                        baseOption: {
                            title: {
                                text: urban + '各地区' + modename + '产量占比预测',
                            },
                            series: [{
                                name: modename + '产量',
                            }],
                        },
                        options: [
                            {
                                title: {text: '2014年' + urban + modename + '产量占比预测'},
                                series: [
                                    {data: teaDisData.year_2014}
                                ]
                            },
                            {
                                title: {text: '2015年' + urban + modename + '产量占比预测'},
                                series: [
                                    {data: teaDisData.year_2015}
                                ]
                            },
                            {
                                title: {text: '2016年' + urban + modename + '产量占比预测'},
                                series: [
                                    {data: teaDisData.year_2016}
                                ]
                            },
                            {
                                title: {text: '2017年' + urban + modename + '产量占比预测'},
                                series: [
                                    {data: teaDisData.year_2017}
                                ]
                            },
                            {
                                title: {text: '2018年' + urban + modename + '产量占比预测'},
                                series: [
                                    {data: teaDisData.year_2018}
                                ]
                            }
                        ]
                    });
                });
                break;
        }

    }
//误差文字部分
    function SetDiv() {
        var err = document.getElementById("error");
        switch (mapdatamode) {
            case 0:
                err.innerHTML =
                    "                        训练集一，隐含层节点数：15,5<br/>茶叶平均误差：<br/>2014年:15.93% <br/>2015年:18.21%<br/>2016年:5.06%<br/>2017年:4.10%<br/>2018年:15.85%"
                break;
            case 1:
                err.innerHTML =
                    "                        训练集二，隐含层节点数：15,5<br/>茶叶平均误差：<br/>2014年:9.19%<br/>2015年:4.14%<br/>2016年:1.34%<br/>2017年:30.06%<br/>2018年:10.49%"
                break;
            case 2:
                err.innerHTML =
                    "                        训练集三，隐含层节点数：15,5<br/>茶叶平均误差：<br/>2014年:39.78%<br/>2015年:26.68%<br/>2016年:23.49%<br/>2017年:0.03%<br/>2018年:28.18%"
                break;
            case 3:
                err.innerHTML =
                    "                        训练集一，隐含层节点数：12,8<br/>茶叶平均误差：<br/>2014年:18.16%<br/>2015年:8.51%<br/>2016年:1.60%<br/>2017年:33.75%<br/>2018年:46.84%"
                break;
            case 4:
                err.innerHTML =
                    "                        训练集二，隐含层节点数：12,8<br/>茶叶平均误差：<br/>2014年:1.77%<br/>2015年:3.74%<br/>2016年:8.81%<br/>2017年:6.72%<br/>2018年:6.06%"
                break;
            case 5:
                err.innerHTML =
                    "                        训练集三，隐含层节点数：12,8<br/>茶叶平均误差：<br/>2014年:43.17%<br/>2015年:31.56%<br/>2016年:31.25%<br/>2017年:0.90%<br/>2018年:9.34%"
                break;
            case 6:
                err.innerHTML =
                    "                        训练集一，隐含层节点数：15,5<br/>柑橘平均误差：<br/>2014年:26.56% <br/>2015年:3.54% <br/>2016年:12.44% <br/>2017年:10.36% <br/>2018年:16.54% "
                break;
            case 7:
                err.innerHTML =
                    "                        训练集二，隐含层节点数：15,5<br/>柑橘平均误差：<br/>2014年:26.17% <br/>2015年:2.67% <br/>2016年:12.30% <br/>2017年:29.40% <br/>2018年:31.31% "
                break;
            case 8:
                err.innerHTML =
                    "                        训练集三，隐含层节点数：15,5<br/>柑橘平均误差：<br/>2014年:4.71% <br/>2015年:20.25% <br/>2016年:27.01% <br/>2017年:42.80% <br/>2018年:39.38% "
                break;
            case 9:
                err.innerHTML =
                    "                        训练集一，隐含层节点数：12,8<br/>柑橘平均误差：<br/>2014年:23.89% <br/>2015年:12.17% <br/>2016年:2.39% <br/>2017年:15.18% <br/>2018年:31.86% "
                break;
            case 10:
                err.innerHTML =
                    "                        训练集二，隐含层节点数：12,8<br/>柑橘平均误差：<br/>2014年:16.73% <br/>2015年:28.06% <br/>2016年:2.05% <br/>2017年:23.55% <br/>2018年:28.67% "
                break;
            case 11:
                err.innerHTML =
                    "                        训练集三，隐含层节点数：12,8<br/>柑橘平均误差：<br/>2014年:3.38% <br/>2015年:13.39% <br/>2016年:17.93% <br/>2017年:33.01% <br/>2018年:23.31% "
                break;
        }
    }


</script>

</body>
</html>